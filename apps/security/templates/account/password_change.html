{% extends "layouts/auth.html" %}
{% load static i18n %}

{% block title %}
    Change Password
{% endblock title %}

{% block content %}
    <div class="flex grow items-center justify-center mx-auto px-4 relative">
        <div class="my-10 w-full sm:w-96">
            <!-- Header -->
            {% include 'account/components/form_header.html' with subtitle='Account Security' title='Change Password' %}

            <!-- Instructions -->
            <div class="mb-6">
                <p class="text-sm text-(--text-body)">
                    {% trans "Enter your current password and choose a new password." %}
                </p>
            </div>

            <!-- Display Errors -->
            {% include 'account/components/error_display.html' %}

            <!-- Password Change Form -->
            <form method="post" action="{% url 'account_change_password' %}">
                {% csrf_token %}

                <!-- Form Fields -->
                <div class="grid grid-cols-1 gap-y-5">
                    <!-- Current Password Field -->
                    {% include 'forms/password_input.html' with label=form.oldpassword.label name=form.oldpassword.html_name id=form.oldpassword.id_for_label required=form.oldpassword.field.required has_error=form.oldpassword.errors error_message=form.oldpassword.errors.0 %}

                    <!-- New Password Field -->
                    {% include 'forms/password_input.html' with label=form.password1.label name=form.password1.html_name id=form.password1.id_for_label required=form.password1.field.required has_error=form.password1.errors error_message=form.password1.errors.0 %}

                    <!-- Confirm New Password Field -->
                    {% include 'forms/password_input.html' with label=form.password2.label name=form.password2.html_name id=form.password2.id_for_label required=form.password2.field.required has_error=form.password2.errors error_message=form.password2.errors.0 %}
                </div>

                <div class="flex flex-col gap-3 mt-6">
                    <!-- Submit Button -->
                    {% include 'buttons/primary.html' with text='Change Password' %}

                    <!-- Back to Dashboard -->
                    {% url 'base:index' as index_url %}
                    {% include 'buttons/secondary_link.html' with text='Back' url=index_url onclick="if (history.length > 1) { history.back(); } else { window.location.href = '{{ index_url }}'; }" %}
                </div>

                <!-- Security Notice -->
                <div class="mt-8 pt-6 border-t border-(--border-default)">
                    <div class="flex items-start gap-3">
                        <span class="material-symbols-outlined text-(--color-accent) text-base! mt-0.5">
                            security
                        </span>
                        <div class="text-left">
                            <p class="text-xs font-medium text-(--text-title) mb-1">
                                {% trans "Security Tips" %}
                            </p>
                            <ul class="text-xs text-(--text-body) space-y-1">
                                <li>• {% trans "Use a strong, unique password" %}</li>
                                <li>• {% trans "Don't reuse passwords from other sites" %}</li>
                                <li>• {% trans "Consider using a password manager" %}</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}