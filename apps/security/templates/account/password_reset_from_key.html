{% extends "layouts/auth.html" %}
{% load static i18n %}

{% block title %}
    Set New Password
{% endblock title %}

{% block content %}
    <div class="flex grow items-center justify-center mx-auto px-4 relative">
        <div class="my-10 w-full sm:w-96">
            {% if token_fail %}
                <!-- Invalid Token Header -->
                <div class="border-b border-b-(--border-default) mb-8 pb-6">
                    <h1 class="font-semibold">
                        <span class="block text-sm text-(--text-title)">Invalid Link</span>
                        <span class="block font-semibold text-(--text-error) tracking-tight text-xl">Bad Token</span>
                    </h1>
                </div>

                <!-- Error Message -->
                <div class="text-sm text-(--text-body)">
                    {% url 'account_reset_password' as passwd_reset_url %}
                    <p>
                        {% blocktrans %}
                            The password reset link was invalid, possibly because it has already been used. Please <a href="{{ passwd_reset_url }}" class="text-(--text-link) hover:underline font-medium">request a new password reset</a>.
                        {% endblocktrans %}
                    </p>
                </div>
            {% else %}
                <!-- Valid Token Header -->
                {% include 'account/components/form_header.html' with subtitle='Create a' title='New Password' %}

                <!-- Password Reset Form -->
                <form method="post" action="{{ action_url }}">
                    {% csrf_token %}

                    <!-- Form Fields -->
                    <div class="grid grid-cols-1 gap-y-5">
                        <!-- New Password Field -->
                        {% include 'forms/password_input.html' with label=form.password1.label name=form.password1.html_name id=form.password1.id_for_label required=form.password1.field.required has_error=form.password1.errors error_message=form.password1.errors.0 %}

                        <!-- Confirm New Password Field -->
                        {% include 'forms/password_input.html' with label=form.password2.label name=form.password2.html_name id=form.password2.id_for_label required=form.password2.field.required has_error=form.password2.errors error_message=form.password2.errors.0 %}
                    </div>

                    <!-- Submit Button -->
                    <div class="flex flex-col gap-3 mt-6">
                        {% include 'buttons/primary.html' with text='Set New Password' %}
                    </div>
                </form>
            {% endif %}
        </div>
    </div>
{% endblock %}